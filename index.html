<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PCC389 FAQ</title>
    <style>
        :root {
            --bg: #0b1220;
            --panel: #0f172a;
            --text: #e2e8f0;
            --muted: #94a3b8;
            --brand: #60a5fa;
            --border: #1f2937;
            --success: #4ade80;
            --warning: #fbbf24;
            --error: #f87171;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }
        
        .header-content {
            position: relative;
        }
        
        h1 { 
            color: var(--brand); 
            margin-bottom: 15px;
            display: inline-block;
        }
        
        .home-btn {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            background: var(--panel);
            color: var(--muted);
            border: 1px solid var(--border);
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            text-decoration: none;
        }
        
        .home-btn:hover {
            color: var(--text);
            border-color: var(--brand);
        }
        
        .contact-info {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .contact-info p {
            margin: 5px 0;
            color: var(--muted);
        }
        
        .contact-info strong {
            color: var(--brand);
            font-weight: 600;
        }
        
        .phone-numbers {
            color: var(--brand) !important;
            font-weight: 600;
            font-size: 15px;
        }
        
        .language-section {
            margin: 20px 0;
            text-align: center;
        }
        
        .language-selector {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px 12px;
        }
        
        .language-icon {
            font-size: 16px;
        }
        
        .language-selector select {
            background: var(--panel);
            color: var(--text);
            border: none;
            padding: 0;
            cursor: pointer;
            font-size: 14px;
            outline: none;
            min-width: 120px;
        }
        
        .language-selector select option {
            background: var(--panel);
            color: var(--text);
            padding: 8px;
        }
        
        .latest-faqs {
            margin-bottom: 30px;
        }
        
        .faq-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .category-filter {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .category-filter label {
            color: var(--muted);
            font-weight: 600;
        }
        
        .category-filter select {
            background: var(--panel);
            color: var(--text);
            border: 1px solid var(--border);
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            min-width: 180px;
        }
        
        .faq-item {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
        }
        
        .faq-item.answered {
            border-left: 4px solid var(--success);
        }
        
        .faq-item.pending {
            border-left: 4px solid var(--warning);
        }
        
        .faq-item h3 {
            color: var(--brand);
            margin-bottom: 10px;
        }
        
        .category {
            display: inline-block;
            background: #1e293b;
            color: #93c5fd;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-bottom: 10px;
        }
        
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 8px;
        }
        
        .status.answered {
            background: #166534;
            color: #bbf7d0;
        }
        
        .status.pending {
            background: #92400e;
            color: #fed7aa;
        }
        
        .answer {
            color: var(--text);
            margin-bottom: 15px;
        }
        
        .question-form {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 25px;
            margin: 40px 0 20px 0;
        }
        
        .question-form h3 {
            color: var(--brand);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            background: var(--bg);
            color: var(--text);
            border: 1px solid var(--border);
            padding: 10px 12px;
            border-radius: 6px;
            font-family: inherit;
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .contact-options {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .contact-option {
            flex: 1;
            text-align: center;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .contact-option.selected {
            border-color: var(--brand);
            background: rgba(96, 165, 250, 0.1);
        }
        
        .contact-option i {
            font-size: 24px;
            margin-bottom: 8px;
            display: block;
        }
        
        .contact-input {
            display: none;
        }
        
        .contact-input.active {
            display: block;
        }
        
        .notification {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }
        
        .notification.info {
            background: rgba(96, 165, 250, 0.1);
            border: 1px solid var(--brand);
            color: var(--brand);
        }
        
        .notification.warning {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid var(--warning);
            color: var(--warning);
        }
        
        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }
        
        .submit-btn {
            background: var(--brand);
            color: #0b1220;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 16px;
            flex: 1;
        }
        
        .cancel-btn {
            background: transparent;
            color: var(--muted);
            border: 1px solid var(--border);
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            flex: 1;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            color: var(--muted);
            font-size: 14px;
        }
        
        .submit-btn:hover {
            opacity: 0.9;
        }
        
        .cancel-btn:hover {
            color: var(--text);
            border-color: #334155;
        }

        /* ÁÆ°ÁêÜÂëòÈù¢ÊùøÊ†∑Âºè */
        .admin-panel {
            background: var(--panel);
            border: 1px solid var(--brand);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .admin-panel h3 {
            color: var(--brand);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .admin-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .pending-questions {
            margin: 20px 0;
        }
        
        .pending-item {
            background: var(--bg);
            border: 1px solid var(--warning);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .answer-form {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border);
        }

        /* Google Translate Styles */
        #google_translate_element {
            display: none !important;
        }

        .goog-te-banner-frame {
            display: none !important;
        }

        .skiptranslate {
            display: none !important;
        }

        body {
            top: 0px !important;
        }

        @media (max-width: 768px) {
            .faq-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .category-filter {
                justify-content: space-between;
            }
            
            .home-btn {
                position: static;
                transform: none;
                margin-bottom: 15px;
                display: inline-block;
            }
            
            .admin-buttons {
                flex-direction: column;
            }
            
            .contact-options {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="#" class="home-btn" onclick="goToHome()">üè† Home</a>
            <h1>PCC389 FAQ</h1>
            <button class="home-btn" onclick="toggleAdmin()" style="right: 0; left: auto;">üîß Admin</button>
        </div>
        
        <div class="contact-info">
            <p><strong>Office:</strong> <span class="phone-numbers">905-566-1269, 905-566-1319, 647-335-0949</span></p>
            <p><strong>Address:</strong> 285 Enfield Pl, Mississauga, ON L5B 3Y6</p>
        </div>
        
        <!-- ÁÆ°ÁêÜÂëòÈù¢Êùø -->
        <div class="admin-panel" id="adminPanel" style="display: none;">
            <h3>üìù ÁÆ°ÁêÜÂëòÈù¢Êùø</h3>
            <div class="admin-buttons">
                <button onclick="showAddForm()" class="submit-btn">Áõ¥Êé•Ê∑ªÂä†FAQ</button>
                <button onclick="exportData()" class="cancel-btn">ÂØºÂá∫Êï∞ÊçÆ</button>
                <button onclick="importData()" class="cancel-btn">ÂØºÂÖ•Êï∞ÊçÆ</button>
            </div>
            
            <!-- ÂæÖÂõûÁ≠îÈóÆÈ¢ò -->
            <div class="pending-questions" id="pendingQuestions">
                <h4>‚è≥ ÂæÖÂõûÁ≠îÈóÆÈ¢ò</h4>
                <div id="pendingList"></div>
            </div>
            
            <!-- FAQÁºñËæëÂô® -->
            <div class="faq-editor" id="faqEditor" style="display: none;">
                <input type="hidden" id="editId">
                <div class="form-group">
                    <label>ÈóÆÈ¢ò:</label>
                    <textarea id="editQuestion" placeholder="ËæìÂÖ•ÈóÆÈ¢ò..."></textarea>
                </div>
                <div class="form-group">
                    <label>Á≠îÊ°à:</label>
                    <textarea id="editAnswer" placeholder="ËæìÂÖ•Á≠îÊ°à..." style="min-height: 150px;"></textarea>
                </div>
                <div class="form-group">
                    <label>ÂàÜÁ±ª:</label>
                    <select id="editCategory">
                        <option value="General Questions">General Questions</option>
                        <option value="Plumbing">Plumbing</option>
                        <option value="Electricity">Electricity</option>
                        <option value="Heating & Cooling">Heating & Cooling</option>
                        <option value="Parking">Parking</option>
                        <option value="Garbage">Garbage</option>
                        <option value="Recycling">Recycling</option>
                        <option value="Payment">Payment</option>
                        <option value="Swimming Pool">Swimming Pool</option>
                        <option value="Fitness Center">Fitness Center</option>
                        <option value="Squash Court">Squash Court</option>
                        <option value="Billiards/Ping Pong">Billiards/Ping Pong</option>
                        <option value="Party Room">Party Room</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button onclick="saveFAQ()" class="submit-btn">‰øùÂ≠ò</button>
                    <button onclick="hideEditor()" class="cancel-btn">ÂèñÊ∂à</button>
                </div>
            </div>
        </div>
        
        <div class="language-section">
            <div class="language-selector">
                <span class="language-icon">üåê</span>
                <select id="languageSelect">
                    <option value="en">English</option>
                    <option value="fr">Fran√ßais</option>
                    <option value="zh-CN">‰∏≠Êñá</option>
                    <option value="es">Espa√±ol</option>
                    <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                    <option value="de">Deutsch</option>
                    <option value="it">Italiano</option>
                    <option value="pt">Portugu√™s</option>
                    <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                    <option value="ja">Êó•Êú¨Ë™û</option>
                    <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                    <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                    <option value="vi">Ti·∫øng Vi·ªát</option>
                    <option value="pl">Polski</option>
                </select>
            </div>
        </div>

        <div id="google_translate_element"></div>
    </header>

    <main>
        <section class="latest-faqs">
            <div class="faq-controls">
                <h2>Latest Questions & Answers</h2>
                <div class="category-filter">
                    <label for="categoryFilter">Filter by Category:</label>
                    <select id="categoryFilter">
                        <option value="all">All Categories</option>
                        <option value="General Questions">General Questions</option>
                        <option value="Plumbing">Plumbing</option>
                        <option value="Electricity">Electricity</option>
                        <option value="Heating & Cooling">Heating & Cooling</option>
                        <option value="Parking">Parking</option>
                        <option value="Garbage">Garbage</option>
                        <option value="Recycling">Recycling</option>
                        <option value="Payment">Payment</option>
                        <option value="Swimming Pool">Swimming Pool</option>
                        <option value="Fitness Center">Fitness Center</option>
                        <option value="Squash Court">Squash Court</option>
                        <option value="Billiards/Ping Pong">Billiards/Ping Pong</option>
                        <option value="Party Room">Party Room</option>
                    </select>
                </div>
            </div>
            <div id="faqList">
                <!-- FAQÂàóË°® -->
            </div>
        </section>

        <div class="question-form">
            <h3>Submit a New Question</h3>
            <form id="newQuestionForm">
                <div class="form-group">
                    <label for="question">Your Question *</label>
                    <textarea id="question" name="question" required placeholder="Enter your question here..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category" name="category">
                        <option value="">Select a category</option>
                        <option value="General Questions">General Questions</option>
                        <option value="Plumbing">Plumbing</option>
                        <option value="Electricity">Electricity</option>
                        <option value="Heating & Cooling">Heating & Cooling</option>
                        <option value="Parking">Parking</option>
                        <option value="Garbage">Garbage</option>
                        <option value="Recycling">Recycling</option>
                        <option value="Payment">Payment</option>
                        <option value="Swimming Pool">Swimming Pool</option>
                        <option value="Fitness Center">Fitness Center</option>
                        <option value="Squash Court">Squash Court</option>
                        <option value="Billiards/Ping Pong">Billiards/Ping Pong</option>
                        <option value="Party Room">Party Room</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>How would you like to receive the answer?</label>
                    <div class="contact-options">
                        <div class="contact-option" onclick="selectContactOption('email')">
                            <i>üìß</i>
                            <div>Email</div>
                        </div>
                        <div class="contact-option" onclick="selectContactOption('phone')">
                            <i>üì±</i>
                            <div>SMS</div>
                        </div>
                        <div class="contact-option" onclick="selectContactOption('none')">
                            <i>üîç</i>
                            <div>Check Later</div>
                        </div>
                    </div>
                    
                    <div class="contact-input" id="emailInput">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" name="email" placeholder="your@email.com">
                    </div>
                    
                    <div class="contact-input" id="phoneInput">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" name="phone" placeholder="+1 (555) 123-4567">
                    </div>
                    
                    <div class="notification warning" id="checkLaterWarning" style="display: none;">
                        <strong>‚ö†Ô∏è Notice:</strong> If you don't provide contact information, please check back in 24 hours to see if your question has been answered.
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="submit-btn">Submit Question</button>
                    <button type="button" class="cancel-btn" onclick="resetForm()">Clear Form</button>
                </div>
            </form>
        </div>
    </main>

    <footer>
        <p>¬© 2024 PCC389 Building Management. For reference only.</p>
    </footer>

    <script>
        // ÈªòËÆ§FAQÊï∞ÊçÆ
        const defaultFAQData = [
            {
                id: 1,
                question: "Welcome! How do I get started?",
                answer: "Welcome to PCC389! For any questions about building services, please check this FAQ first. If you can't find what you're looking for, feel free to submit a new question using the form below.",
                category: "General Questions",
                date: "2024-01-15",
                status: "answered"
            },
            {
                id: 2,
                question: "What should I do if there's a plumbing emergency?",
                answer: "For urgent plumbing issues (flooding, major leaks), please contact building maintenance immediately at 905-566-1269. For non-urgent issues, you can submit a maintenance request through the office.",
                category: "Plumbing",
                date: "2024-01-10",
                status: "answered"
            },
            {
                id: 3,
                question: "How do I access the fitness center?",
                answer: "The fitness center is accessible 24/7 using your resident keycard. Please remember to clean equipment after use and follow all posted safety guidelines.",
                category: "Fitness Center",
                date: "2024-01-08",
                status: "answered"
            },
            {
                id: 4,
                question: "Bathrooms no power",
                answer: "The bathroom has a GFCI socket that has tripped due to overload or short circuit protection. To reset it, simply press the reset button on the socket. This socket is located on the left-hand side upon entering the small bathroom.",
                category: "General Questions",
                date: "2024-01-15",
                status: "answered"
            },
            {
                id: 5,
                question: "How to setup my Thermostat?",
                answer: "The thermostat setting method: A standard mechanical thermostat is typically used indoors. A small round box is placed on a short wall near the floor-to-ceiling window in the living room. On the left side of the box is a "cool-off-heat" switch; this switch cools in summer and heats in winter. On the right side of the box is the fan switch, set to automatic. In the center of the box is a disc with semi-circular graduations at the top and bottom. The top graduation shows the set temperature, and the bottom graduation shows the current temperature. Behind the wall is another switch to set the fan speed.",
                category: "General Questions",
                date: "2024-01-15",
                status: "answered"
            },
        ];

        // ÂæÖÂõûÁ≠îÈóÆÈ¢òÂ≠òÂÇ®
        const defaultPendingQuestions = [];

        // ‰ªélocalStorageÂä†ËΩΩÊï∞ÊçÆ
        function loadFAQData() {
            const savedData = localStorage.getItem('pcc389_faq_data');
            return savedData ? JSON.parse(savedData) : defaultFAQData;
        }

        function loadPendingQuestions() {
            const savedData = localStorage.getItem('pcc389_pending_questions');
            return savedData ? JSON.parse(savedData) : defaultPendingQuestions;
        }

        function saveFAQData(data) {
            localStorage.setItem('pcc389_faq_data', JSON.stringify(data));
        }

        function savePendingQuestions(data) {
            localStorage.setItem('pcc389_pending_questions', JSON.stringify(data));
        }

        let selectedContactOption = 'none';

        // ÈÄâÊã©ËÅîÁ≥ªÊñπÂºè
        function selectContactOption(option) {
            selectedContactOption = option;
            
            // Êõ¥Êñ∞UI
            document.querySelectorAll('.contact-option').forEach(el => {
                el.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // ÊòæÁ§∫ÂØπÂ∫îÁöÑËæìÂÖ•Ê°Ü
            document.getElementById('emailInput').classList.remove('active');
            document.getElementById('phoneInput').classList.remove('active');
            document.getElementById('checkLaterWarning').style.display = 'none';
            
            if (option === 'email') {
                document.getElementById('emailInput').classList.add('active');
            } else if (option === 'phone') {
                document.getElementById('phoneInput').classList.add('active');
            } else {
                document.getElementById('checkLaterWarning').style.display = 'block';
            }
        }

        // Êèê‰∫§Êñ∞ÈóÆÈ¢ò
        document.getElementById('newQuestionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const question = formData.get('question');
            const category = formData.get('category') || 'General Questions';
            const email = formData.get('email');
            const phone = formData.get('phone');
            
            let contactInfo = '';
            if (selectedContactOption === 'email' && email) {
                contactInfo = `Email: ${email}`;
            } else if (selectedContactOption === 'phone' && phone) {
                contactInfo = `Phone: ${phone}`;
            }
            
            // ‰øùÂ≠òÂà∞ÂæÖÂõûÁ≠îÈóÆÈ¢ò
            const pendingQuestions = loadPendingQuestions();
            const newPendingQuestion = {
                id: Date.now(),
                question: question,
                category: category,
                contactInfo: contactInfo,
                date: new Date().toISOString(),
                status: 'pending'
            };
            
            pendingQuestions.push(newPendingQuestion);
            savePendingQuestions(pendingQuestions);
            
            // ÂèëÈÄÅÈÇÆ‰ª∂ÁªôÁÆ°ÁêÜÂëò
            const adminEmail = 'johnetli@gmail.com';
            const subject = encodeURIComponent(`New Question: ${category}`);
            const body = encodeURIComponent(
                `A new question has been submitted to PCC389 FAQ:\n\n` +
                `Question: ${question}\n\n` +
                `Category: ${category}\n\n` +
                `Contact Info: ${contactInfo || 'User will check back later'}\n\n` +
                `Submitted on: ${new Date().toLocaleString()}\n\n` +
                `Please login to the admin panel to answer this question.\n` +
                `Admin URL: ${window.location.href}?admin=true`
            );
            
            window.location.href = `mailto:${adminEmail}?subject=${subject}&body=${body}`;
            
            // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
            if (contactInfo) {
                alert('Thank you for your question! We will send the answer to your provided contact information within 24 hours.');
            } else {
                alert('Thank you for your question! Please check back in 24 hours to see if your question has been answered.');
            }
            
            resetForm();
            displayPendingQuestions();
        });

        // ÊòæÁ§∫ÂæÖÂõûÁ≠îÈóÆÈ¢òÔºàÁÆ°ÁêÜÂëòÁî®Ôºâ
        function displayPendingQuestions() {
            const pendingList = document.getElementById('pendingList');
            const pendingQuestions = loadPendingQuestions();
            
            if (pendingQuestions.length === 0) {
                pendingList.innerHTML = '<p>No pending questions.</p>';
                return;
            }
            
            pendingList.innerHTML = pendingQuestions.map(pending => `
                <div class="pending-item">
                    <strong>${pending.question}</strong>
                    <div class="category">${pending.category}</div>
                    <small>Submitted: ${new Date(pending.date).toLocaleString()}</small>
                    ${pending.contactInfo ? `<div><small>Contact: ${pending.contactInfo}</small></div>` : ''}
                    
                    <div class="answer-form">
                        <textarea id="answer_${pending.id}" placeholder="Enter your answer here..." style="width: 100%; min-height: 80px; margin: 10px 0;"></textarea>
                        <button onclick="submitAnswer(${pending.id})" class="submit-btn" style="padding: 8px 16px;">Submit Answer</button>
                        <button onclick="addToFAQ(${pending.id})" class="cancel-btn" style="padding: 8px 16px;">Add to FAQ</button>
                    </div>
                </div>
            `).join('');
        }

        // Êèê‰∫§Á≠îÊ°à
        function submitAnswer(questionId) {
            const answer = document.getElementById(`answer_${questionId}`).value;
            if (!answer) {
                alert('Please enter an answer!');
                return;
            }
            
            const pendingQuestions = loadPendingQuestions();
            const questionIndex = pendingQuestions.findIndex(q => q.id === questionId);
            
            if (questionIndex !== -1) {
                const question = pendingQuestions[questionIndex];
                
                // Â¶ÇÊûúÊúâËÅîÁ≥ªÊñπÂºèÔºåÂèëÈÄÅÁ≠îÊ°à
                if (question.contactInfo) {
                    const subject = encodeURIComponent(`Answer to your PCC389 question`);
                    const body = encodeURIComponent(
                        `Your question: ${question.question}\n\n` +
                        `Our answer: ${answer}\n\n` +
                        `Thank you for using PCC389 FAQ!\n` +
                        `If you have more questions, please visit: ${window.location.href}`
                    );
                    
                    if (question.contactInfo.startsWith('Email:')) {
                        const email = question.contactInfo.replace('Email: ', '');
                        window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
                    } else if (question.contactInfo.startsWith('Phone:')) {
                        // ÂØπ‰∫éÊâãÊú∫Âè∑ÔºåÊòæÁ§∫‰ø°ÊÅØËÆ©ÁÆ°ÁêÜÂëòÊâãÂä®ÂèëÈÄÅÁü≠‰ø°
                        alert(`Please send SMS to: ${question.contactInfo}\n\nMessage: ${answer}`);
                    }
                }
                
                // ‰ªéÂæÖÂ§ÑÁêÜÂàóË°®‰∏≠ÁßªÈô§
                pendingQuestions.splice(questionIndex, 1);
                savePendingQuestions(pendingQuestions);
                
                alert('Answer submitted successfully!');
                displayPendingQuestions();
            }
        }

        // Ê∑ªÂä†Âà∞FAQ
        function addToFAQ(questionId) {
            const answer = document.getElementById(`answer_${questionId}`).value;
            if (!answer) {
                alert('Please enter an answer before adding to FAQ!');
                return;
            }
            
            const pendingQuestions = loadPendingQuestions();
            const questionIndex = pendingQuestions.findIndex(q => q.id === questionId);
            
            if (questionIndex !== -1) {
                const question = pendingQuestions[questionIndex];
                
                // Ê∑ªÂä†Âà∞FAQ
                const faqData = loadFAQData();
                const newFAQ = {
                    id: Date.now(),
                    question: question.question,
                    answer: answer,
                    category: question.category,
                    date: new Date().toISOString().split('T')[0],
                    status: 'answered'
                };
                
                faqData.push(newFAQ);
                saveFAQData(faqData);
                
                // ‰ªéÂæÖÂ§ÑÁêÜÂàóË°®‰∏≠ÁßªÈô§
                pendingQuestions.splice(questionIndex, 1);
                savePendingQuestions(pendingQuestions);
                
                // Â¶ÇÊûúÊúâËÅîÁ≥ªÊñπÂºèÔºåÂèëÈÄÅÈÄöÁü•
                if (question.contactInfo) {
                    const subject = encodeURIComponent(`Answer to your PCC389 question`);
                    const body = encodeURIComponent(
                        `Your question: ${question.question}\n\n` +
                        `Our answer: ${answer}\n\n` +
                        `Your question has been added to our FAQ for future reference.\n` +
                        `Thank you for using PCC389 FAQ!`
                    );
                    
                    if (question.contactInfo.startsWith('Email:')) {
                        const email = question.contactInfo.replace('Email: ', '');
                        window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
                    }
                }
                
                alert('Question added to FAQ successfully!');
                displayPendingQuestions();
                displayFAQs();
            }
        }

        // ÈáçÁΩÆË°®Âçï
        function resetForm() {
            document.getElementById('newQuestionForm').reset();
            selectedContactOption = 'none';
            document.querySelectorAll('.contact-option').forEach(el => {
                el.classList.remove('selected');
            });
            document.getElementById('emailInput').classList.remove('active');
            document.getElementById('phoneInput').classList.remove('active');
            document.getElementById('checkLaterWarning').style.display = 'none';
        }

        // ÁÆ°ÁêÜÂëòÂäüËÉΩ
        function toggleAdmin() {
            const password = prompt("ËØ∑ËæìÂÖ•ÁÆ°ÁêÜÂëòÂØÜÁ†Å:");
            if (password === "pcc389admin") {
                const panel = document.getElementById('adminPanel');
                panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
                if (panel.style.display === 'block') {
                    displayPendingQuestions();
                }
            } else if (password) {
                alert("ÂØÜÁ†ÅÈîôËØØ!");
            }
        }

        // ÂÖ∂‰ªñÂéüÊúâÂáΩÊï∞‰øùÊåÅ‰∏çÂèò
        function showAddForm() {
            document.getElementById('faqEditor').style.display = 'block';
            document.getElementById('editId').value = '';
            document.getElementById('editQuestion').value = '';
            document.getElementById('editAnswer').value = '';
            document.getElementById('editCategory').value = 'General Questions';
        }

        function saveFAQ() {
            const id = document.getElementById('editId').value;
            const question = document.getElementById('editQuestion').value;
            const answer = document.getElementById('editAnswer').value;
            const category = document.getElementById('editCategory').value;
            
            if (question && answer) {
                const data = loadFAQData();
                
                if (id) {
                    const index = data.findIndex(item => item.id === parseInt(id));
                    if (index !== -1) {
                        data[index] = { ...data[index], question, answer, category };
                    }
                } else {
                    const newFAQ = {
                        id: Date.now(),
                        question: question,
                        answer: answer,
                        category: category,
                        date: new Date().toISOString().split('T')[0],
                        status: 'answered'
                    };
                    data.push(newFAQ);
                }
                
                saveFAQData(data);
                displayFAQs();
                hideEditor();
                alert('FAQ saved!');
            } else {
                alert('Please fill in both question and answer!');
            }
        }

        function hideEditor() {
            document.getElementById('faqEditor').style.display = 'none';
        }

        function exportData() {
            const data = loadFAQData();
            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'pcc389_faq_backup.json';
            a.click();
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = event => {
                    try {
                        const data = JSON.parse(event.target.result);
                        saveFAQData(data);
                        displayFAQs();
                        alert('Data imported successfully!');
                    } catch (error) {
                        alert('Invalid file format!');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        // ÊòæÁ§∫FAQs
        function displayFAQs(category = 'all') {
            const faqList = document.getElementById('faqList');
            const data = loadFAQData();
            
            let filteredFAQs;
            if (category === 'all') {
                filteredFAQs = [...data].sort((a, b) => new Date(b.date) - new Date(a.date));
            } else {
                filteredFAQs = data
                    .filter(faq => faq.category === category)
                    .sort((a, b) => new Date(b.date) - new Date(a.date));
            }
            
            if (filteredFAQs.length === 0) {
                faqList.innerHTML = `
                    <div class="faq-item">
                        <div class="answer">No questions found in this category. Be the first to submit a question!</div>
                    </div>
                `;
                return;
            }
            
            faqList.innerHTML = filteredFAQs.map(faq => `
                <div class="faq-item ${faq.status === 'answered' ? 'answered' : 'pending'}">
                    <span class="category">${faq.category}</span>
                    <span class="status ${faq.status}">${faq.status}</span>
                    <h3>${faq.question}</h3>
                    <div class="answer">${faq.answer}</div>
                    <small style="color: var(--muted);">Added: ${faq.date}</small>
                </div>
            `).join('');
        }

        function goToHome() {
            document.getElementById('categoryFilter').value = 'all';
            displayFAQs('all');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.getElementById('categoryFilter').addEventListener('change', function(e) {
            displayFAQs(e.target.value);
        });

        // ÁøªËØëÂäüËÉΩ
        document.getElementById('languageSelect').addEventListener('change', function(e) {
            const lang = e.target.value;
            if (lang === 'en') {
                document.cookie = 'googtrans=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
                location.reload();
            } else {
                document.cookie = `googtrans=/en/${lang}; path=/`;
                location.reload();
            }
        });

        function initializeGoogleTranslate() {
            const script = document.createElement('script');
            script.src = 'https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
            document.head.appendChild(script);
        }

        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,fr,zh-CN,es,ar,de,it,pt,ru,ja,ko,hi,vi,pl',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false
            }, 'google_translate_element');
        }

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            displayFAQs();
            initializeGoogleTranslate();
            
            // Ê£ÄÊü•URLÂèÇÊï∞
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('admin') === 'true') {
                toggleAdmin();
            }
        });
    </script>
</body>
</html>
